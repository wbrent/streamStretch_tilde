#N canvas 147 345 652 338 10;
#N canvas 170 93 1010 734 FFT-reblocking 0;
#X obj 687 596 *~;
#X obj 288 400 rfft~;
#X obj 171 209 rfft~;
#X obj 448 592 rifft~;
#X obj 687 625 outlet~;
#X obj 683 130 block~;
#X obj 687 522 *~;
#X msg 683 105 set \$1 4;
#X obj 130 125 /~;
#X obj 46 124 /~;
#X obj 46 428 /~;
#X obj 148 427 /~;
#X obj 729 548 t b f;
#X msg 729 571 2;
#X obj 729 594 /;
#X obj 775 576 * 3;
#N canvas 697 91 270 255 get-mag 0;
#X obj 69 22 inlet~;
#X obj 162 107 *~;
#X obj 69 107 *~;
#X obj 69 133 +~;
#X obj 69 157 sqrt~;
#X obj 162 22 inlet~;
#X obj 69 203 outlet~;
#X connect 0 0 2 0;
#X connect 0 0 2 1;
#X connect 1 0 3 1;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 6 0;
#X connect 5 0 1 0;
#X connect 5 0 1 1;
#X restore 166 379 pd get-mag;
#N canvas 697 91 270 255 get-mag 0;
#X obj 69 22 inlet~;
#X obj 142 67 *~;
#X obj 69 67 *~;
#X obj 69 93 +~;
#X obj 69 117 sqrt~;
#X obj 142 22 inlet~;
#X obj 69 140 +~ 1e-20;
#X obj 69 163 outlet~;
#X connect 0 0 2 0;
#X connect 0 0 2 1;
#X connect 1 0 3 1;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 6 0;
#X connect 5 0 1 0;
#X connect 5 0 1 1;
#X connect 6 0 7 0;
#X restore 151 83 pd get-mag;
#X text 511 592 <-- inverse FFT;
#X obj 46 315 +~ 1e-15;
#X obj 208 235 *~ -1;
#N canvas 296 54 815 371 complex-mult 0;
#X obj 420 184 *~;
#X obj 384 184 *~;
#X obj 331 184 *~;
#X obj 300 184 *~;
#X obj 300 220 -~;
#X obj 384 217 +~;
#X obj 300 258 outlet~;
#X obj 384 258 outlet~;
#X obj 300 68 inlet~;
#X obj 384 68 inlet~;
#X obj 470 68 inlet~;
#X obj 554 68 inlet~;
#X text 211 293 Real result;
#X text 444 293 Imaginary result;
#X text 20 198 (Real1 * Real2) - (Imag1 * Imag2);
#X text 50 230 MINUS \, because i*i = -1;
#X text 470 198 (Imag1 * Real2) + (Real1 * Imag2);
#X text 488 34 Second multiplicand: real/imaginary;
#X text 170 34 First multiplicand: real/imaginary;
#X connect 0 0 5 1;
#X connect 1 0 5 0;
#X connect 2 0 4 1;
#X connect 3 0 4 0;
#X connect 4 0 6 0;
#X connect 5 0 7 0;
#X connect 8 0 3 0;
#X connect 8 0 0 0;
#X connect 9 0 2 0;
#X connect 9 0 1 0;
#X connect 10 0 3 1;
#X connect 10 0 1 1;
#X connect 11 0 2 1;
#X connect 11 0 0 1;
#X restore 46 290 pd complex-mult;
#N canvas 296 54 793 368 complex-mult 0;
#X obj 415 169 *~;
#X obj 379 169 *~;
#X obj 326 169 *~;
#X obj 295 169 *~;
#X obj 295 205 -~;
#X obj 379 202 +~;
#X obj 295 243 outlet~;
#X obj 379 243 outlet~;
#X obj 295 53 inlet~;
#X obj 379 53 inlet~;
#X obj 465 53 inlet~;
#X obj 549 53 inlet~;
#X text 206 278 Real result;
#X text 439 278 Imaginary result;
#X text 15 183 (Real1 * Real2) - (Imag1 * Imag2);
#X text 45 215 MINUS \, because i*i = -1;
#X text 465 183 (Imag1 * Real2) + (Real1 * Imag2);
#X text 483 19 Second multiplicand: real/imaginary;
#X text 165 19 First multiplicand: real/imaginary;
#X connect 0 0 5 1;
#X connect 1 0 5 0;
#X connect 2 0 4 1;
#X connect 3 0 4 0;
#X connect 4 0 6 0;
#X connect 5 0 7 0;
#X connect 8 0 3 0;
#X connect 8 0 0 0;
#X connect 9 0 2 0;
#X connect 9 0 1 0;
#X connect 10 0 3 1;
#X connect 10 0 1 1;
#X connect 11 0 2 1;
#X connect 11 0 0 1;
#X restore 46 520 pd complex-mult;
#X text 180 283 <-- complex multiplication: normalized previous times
the conjugate of the back window.;
#X text 261 230 <-- flip the sign of the imaginary component to get
the conjugate;
#N canvas 818 79 566 495 hann-window 0;
#X obj 41 81 until;
#X obj 41 132 f;
#X obj 81 132 + 1;
#X obj 82 297 cos;
#X obj 82 270 *;
#X obj 41 367 * 0.5;
#X obj 41 163 t b b f f;
#X msg 62 106 0;
#X obj 41 343 -;
#X msg 41 270 1;
#X obj 311 329 table \$0-streamstretch-hann;
#X obj 41 388 tabwrite \$0-streamstretch-hann;
#X obj 41 21 r \$0-streamstretch-window-size;
#X msg 174 138 \; \$2-streamstretch-hann resize \$1 \;;
#X obj 174 115 pack f \$0;
#X obj 41 51 t f b f f;
#X obj 168 222 /;
#X obj 82 222 f 3.14159;
#X obj 82 244 * 2;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 0 6 0;
#X connect 2 0 1 1;
#X connect 3 0 8 1;
#X connect 4 0 3 0;
#X connect 5 0 11 0;
#X connect 6 0 9 0;
#X connect 6 1 17 0;
#X connect 6 2 16 0;
#X connect 6 3 11 1;
#X connect 7 0 1 1;
#X connect 8 0 5 0;
#X connect 9 0 8 0;
#X connect 12 0 15 0;
#X connect 14 0 13 0;
#X connect 15 0 0 0;
#X connect 15 1 7 0;
#X connect 15 2 16 1;
#X connect 15 3 14 0;
#X connect 16 0 4 1;
#X connect 17 0 18 0;
#X connect 18 0 4 0;
#X restore 625 435 pd hann-window;
#N canvas 273 31 665 696 read-windows 0;
#X text 106 30 It may be ugly \, but better to patch the output directly
than a throw~/catch~ scenario \, since the latter causes an extra delay
of 1 block.;
#X obj 34 616 outlet~;
#X obj 364 616 outlet~;
#X obj 34 176 ./lib/streamstretch-reader-abs \$0 0;
#X obj 34 356 ./lib/streamstretch-reader-abs \$0 9;
#X obj 34 436 ./lib/streamstretch-reader-abs \$0 13;
#X obj 34 196 ./lib/streamstretch-reader-abs \$0 1;
#X obj 34 216 ./lib/streamstretch-reader-abs \$0 2;
#X obj 34 236 ./lib/streamstretch-reader-abs \$0 3;
#X obj 34 256 ./lib/streamstretch-reader-abs \$0 4;
#X obj 34 276 ./lib/streamstretch-reader-abs \$0 5;
#X obj 34 296 ./lib/streamstretch-reader-abs \$0 6;
#X obj 34 316 ./lib/streamstretch-reader-abs \$0 7;
#X obj 34 336 ./lib/streamstretch-reader-abs \$0 8;
#X obj 34 376 ./lib/streamstretch-reader-abs \$0 10;
#X obj 34 396 ./lib/streamstretch-reader-abs \$0 11;
#X obj 34 416 ./lib/streamstretch-reader-abs \$0 12;
#X obj 34 456 ./lib/streamstretch-reader-abs \$0 14;
#X obj 34 476 ./lib/streamstretch-reader-abs \$0 15;
#X obj 34 496 ./lib/streamstretch-reader-abs \$0 16;
#X obj 34 516 ./lib/streamstretch-reader-abs \$0 17;
#X obj 34 536 ./lib/streamstretch-reader-abs \$0 18;
#X obj 34 556 ./lib/streamstretch-reader-abs \$0 19;
#X connect 3 0 1 0;
#X connect 3 1 2 0;
#X connect 4 0 1 0;
#X connect 4 1 2 0;
#X connect 5 0 1 0;
#X connect 5 1 2 0;
#X connect 6 0 1 0;
#X connect 6 1 2 0;
#X connect 7 0 1 0;
#X connect 7 1 2 0;
#X connect 8 0 1 0;
#X connect 8 1 2 0;
#X connect 9 0 1 0;
#X connect 9 1 2 0;
#X connect 10 0 1 0;
#X connect 10 1 2 0;
#X connect 11 0 1 0;
#X connect 11 1 2 0;
#X connect 12 0 1 0;
#X connect 12 1 2 0;
#X connect 13 0 1 0;
#X connect 13 1 2 0;
#X connect 14 0 1 0;
#X connect 14 1 2 0;
#X connect 15 0 1 0;
#X connect 15 1 2 0;
#X connect 16 0 1 0;
#X connect 16 1 2 0;
#X connect 17 0 1 0;
#X connect 17 1 2 0;
#X connect 18 0 1 0;
#X connect 18 1 2 0;
#X connect 19 0 1 0;
#X connect 19 1 2 0;
#X connect 20 0 1 0;
#X connect 20 1 2 0;
#X connect 21 0 1 0;
#X connect 21 1 2 0;
#X connect 22 0 1 0;
#X connect 22 1 2 0;
#X restore 171 175 pd read-windows;
#X obj 130 38 tabreceive~ \$0-streamstretch-prev-imag;
#X obj 633 61 r \$0-streamstretch-window-size;
#X obj 625 359 table \$0-streamstretch-prev-real;
#X obj 625 379 table \$0-streamstretch-prev-imag;
#X obj 708 497 tabreceive~ \$0-streamstretch-hann;
#X obj 729 525 r \$0-streamstretch-window-size;
#X obj 172 594 tabsend~ \$0-streamstretch-prev-imag;
#X obj 32 623 tabsend~ \$0-streamstretch-prev-real;
#X obj 46 7 tabreceive~ \$0-streamstretch-prev-real;
#X obj 633 164 pack f \$0;
#X msg 633 184 \; \$2-streamstretch-prev-real resize \$1 \; \$2-streamstretch-prev-imag
resize \$1 \;;
#X obj 633 122 / 2;
#X obj 633 144 + 1;
#X connect 0 0 4 0;
#X connect 1 0 22 2;
#X connect 1 1 22 3;
#X connect 2 0 21 2;
#X connect 2 1 20 0;
#X connect 3 0 6 0;
#X connect 6 0 0 0;
#X connect 7 0 5 0;
#X connect 8 0 21 1;
#X connect 9 0 21 0;
#X connect 10 0 22 0;
#X connect 11 0 22 1;
#X connect 12 0 13 0;
#X connect 12 1 15 0;
#X connect 13 0 14 0;
#X connect 14 0 0 1;
#X connect 15 0 14 1;
#X connect 16 0 10 1;
#X connect 16 0 11 1;
#X connect 17 0 8 1;
#X connect 17 0 9 1;
#X connect 19 0 16 0;
#X connect 19 0 10 0;
#X connect 20 0 21 3;
#X connect 21 0 19 0;
#X connect 21 1 16 1;
#X connect 21 1 11 0;
#X connect 22 0 3 0;
#X connect 22 0 34 0;
#X connect 22 1 3 1;
#X connect 22 1 33 0;
#X connect 26 0 2 0;
#X connect 26 1 1 0;
#X connect 27 0 8 0;
#X connect 27 0 17 1;
#X connect 28 0 7 0;
#X connect 28 0 38 0;
#X connect 31 0 6 1;
#X connect 32 0 12 0;
#X connect 35 0 9 0;
#X connect 35 0 17 0;
#X connect 36 0 37 0;
#X connect 38 0 39 0;
#X connect 39 0 36 0;
#X restore 38 118 pd FFT-reblocking;
#X obj 38 170 outlet~;
#N canvas 481 401 932 515 input-buffering 0;
#X obj 40 86 bang~;
#X obj 40 271 f;
#X obj 40 152 spigot;
#X obj 40 376 f;
#X obj 102 365 + 1;
#X obj 40 323 select 0;
#X text 115 298 Wait a certain number of blocks (690 here \, or about
a second) before recording to a new table;
#N canvas 776 281 258 195 buffer-tables 0;
#N canvas 0 22 450 300 clear-buffers 0;
#X obj 70 35 r \$0-streamstretch-clear-buffers;
#X obj 70 57 f;
#X obj 70 79 t f b;
#X obj 70 101 until;
#X obj 70 153 f;
#X obj 100 155 + 1;
#X msg 84 126 0;
#X obj 100 57 r \$0-streamstretch-num-buffers;
#X obj 70 175 pack f \$0;
#X msg 70 197 \; \$2-streamstretch-buf-\$1 const 0 \;;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 6 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 4 0 8 0;
#X connect 5 0 4 1;
#X connect 6 0 4 1;
#X connect 7 0 1 1;
#X connect 8 0 9 0;
#X restore 33 93 pd clear-buffers;
#N canvas 0 22 415 363 resize-buffers 0;
#X obj 74 107 f;
#X obj 74 129 t f b;
#X obj 74 151 until;
#X obj 74 203 f;
#X obj 104 205 + 1;
#X msg 88 176 0;
#X obj 104 107 r \$0-streamstretch-num-buffers;
#X obj 74 61 r \$0-streamstretch-buf-len-samps;
#X msg 74 247 \; \$2-streamstretch-buf-\$1 resize \$3 \;;
#X obj 74 225 pack f \$0 f;
#X obj 74 83 t b f;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 5 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 3 0 9 0;
#X connect 4 0 3 1;
#X connect 5 0 3 1;
#X connect 6 0 0 1;
#X connect 7 0 10 0;
#X connect 9 0 8 0;
#X connect 10 0 0 0;
#X connect 10 1 9 2;
#X restore 33 73 pd resize-buffers;
#N canvas 0 22 450 300 \$0-streamstretch-buffers 0;
#X obj 100 100 table 1003-streamstretch-buf-0 88192;
#X obj 100 100 table 1003-streamstretch-buf-1 88192;
#X obj 100 100 table 1003-streamstretch-buf-2 88192;
#X obj 100 100 table 1003-streamstretch-buf-3 88192;
#X obj 100 100 table 1003-streamstretch-buf-4 88192;
#X obj 100 100 table 1003-streamstretch-buf-5 88192;
#X obj 100 100 table 1003-streamstretch-buf-6 88192;
#X obj 100 100 table 1003-streamstretch-buf-7 88192;
#X obj 100 100 table 1003-streamstretch-buf-8 88192;
#X obj 100 100 table 1003-streamstretch-buf-9 88192;
#X obj 100 100 table 1003-streamstretch-buf-10 88192;
#X obj 100 100 table 1003-streamstretch-buf-11 88192;
#X obj 100 100 table 1003-streamstretch-buf-12 88192;
#X obj 100 100 table 1003-streamstretch-buf-13 88192;
#X obj 100 100 table 1003-streamstretch-buf-14 88192;
#X obj 100 100 table 1003-streamstretch-buf-15 88192;
#X obj 100 100 table 1003-streamstretch-buf-16 88192;
#X obj 100 100 table 1003-streamstretch-buf-17 88192;
#X obj 100 100 table 1003-streamstretch-buf-18 88192;
#X obj 100 100 table 1003-streamstretch-buf-19 88192;
#X obj 100 100 table 1003-streamstretch-buf-20 88192;
#X obj 100 100 table 1003-streamstretch-buf-21 88192;
#X obj 100 100 table 1003-streamstretch-buf-22 88192;
#X obj 100 100 table 1003-streamstretch-buf-23 88192;
#X obj 100 100 table 1003-streamstretch-buf-24 88192;
#X obj 100 100 table 1003-streamstretch-buf-25 88192;
#X obj 100 100 table 1003-streamstretch-buf-26 88192;
#X obj 100 100 table 1003-streamstretch-buf-27 88192;
#X obj 100 100 table 1003-streamstretch-buf-28 88192;
#X obj 100 100 table 1003-streamstretch-buf-29 88192;
#X obj 100 100 table 1003-streamstretch-buf-30 88192;
#X obj 100 100 table 1003-streamstretch-buf-31 88192;
#X obj 100 100 table 1003-streamstretch-buf-32 88192;
#X obj 100 100 table 1003-streamstretch-buf-33 88192;
#X obj 100 100 table 1003-streamstretch-buf-34 88192;
#X obj 100 100 table 1003-streamstretch-buf-35 88192;
#X obj 100 100 table 1003-streamstretch-buf-36 88192;
#X obj 100 100 table 1003-streamstretch-buf-37 88192;
#X obj 100 100 table 1003-streamstretch-buf-38 88192;
#X obj 100 100 table 1003-streamstretch-buf-39 88192;
#X obj 100 100 table 1003-streamstretch-buf-40 88192;
#X obj 100 100 table 1003-streamstretch-buf-41 88192;
#X obj 100 100 table 1003-streamstretch-buf-42 88192;
#X obj 100 100 table 1003-streamstretch-buf-43 88192;
#X obj 100 100 table 1003-streamstretch-buf-44 88192;
#X obj 100 100 table 1003-streamstretch-buf-45 88192;
#X obj 100 100 table 1003-streamstretch-buf-46 88192;
#X obj 100 100 table 1003-streamstretch-buf-47 88192;
#X obj 100 100 table 1003-streamstretch-buf-48 88192;
#X obj 100 100 table 1003-streamstretch-buf-49 88192;
#X obj 100 100 table 1003-streamstretch-buf-50 88192;
#X obj 100 100 table 1003-streamstretch-buf-51 88192;
#X obj 100 100 table 1003-streamstretch-buf-52 88192;
#X obj 100 100 table 1003-streamstretch-buf-53 88192;
#X obj 100 100 table 1003-streamstretch-buf-54 88192;
#X obj 100 100 table 1003-streamstretch-buf-55 88192;
#X obj 100 100 table 1003-streamstretch-buf-56 88192;
#X obj 100 100 table 1003-streamstretch-buf-57 88192;
#X obj 100 100 table 1003-streamstretch-buf-58 88192;
#X obj 100 100 table 1003-streamstretch-buf-59 88192;
#X obj 100 100 table 1003-streamstretch-buf-60 88192;
#X obj 100 100 table 1003-streamstretch-buf-61 88192;
#X obj 100 100 table 1003-streamstretch-buf-62 88192;
#X obj 100 100 table 1003-streamstretch-buf-63 88192;
#X obj 100 100 table 1003-streamstretch-buf-64 88192;
#X obj 100 100 table 1003-streamstretch-buf-65 88192;
#X obj 100 100 table 1003-streamstretch-buf-66 88192;
#X obj 100 100 table 1003-streamstretch-buf-67 88192;
#X obj 100 100 table 1003-streamstretch-buf-68 88192;
#X obj 100 100 table 1003-streamstretch-buf-69 88192;
#X obj 100 100 table 1003-streamstretch-buf-70 88192;
#X obj 100 100 table 1003-streamstretch-buf-71 88192;
#X obj 100 100 table 1003-streamstretch-buf-72 88192;
#X obj 100 100 table 1003-streamstretch-buf-73 88192;
#X obj 100 100 table 1003-streamstretch-buf-74 88192;
#X obj 100 100 table 1003-streamstretch-buf-75 88192;
#X obj 100 100 table 1003-streamstretch-buf-76 88192;
#X obj 100 100 table 1003-streamstretch-buf-77 88192;
#X obj 100 100 table 1003-streamstretch-buf-78 88192;
#X obj 100 100 table 1003-streamstretch-buf-79 88192;
#X obj 100 100 table 1003-streamstretch-buf-80 88192;
#X obj 100 100 table 1003-streamstretch-buf-81 88192;
#X obj 100 100 table 1003-streamstretch-buf-82 88192;
#X obj 100 100 table 1003-streamstretch-buf-83 88192;
#X obj 100 100 table 1003-streamstretch-buf-84 88192;
#X obj 100 100 table 1003-streamstretch-buf-85 88192;
#X obj 100 100 table 1003-streamstretch-buf-86 88192;
#X obj 100 100 table 1003-streamstretch-buf-87 88192;
#X obj 100 100 table 1003-streamstretch-buf-88 88192;
#X obj 100 100 table 1003-streamstretch-buf-89 88192;
#X obj 100 100 table 1003-streamstretch-buf-90 88192;
#X obj 100 100 table 1003-streamstretch-buf-91 88192;
#X obj 100 100 table 1003-streamstretch-buf-92 88192;
#X obj 100 100 table 1003-streamstretch-buf-93 88192;
#X obj 100 100 table 1003-streamstretch-buf-94 88192;
#X obj 100 100 table 1003-streamstretch-buf-95 88192;
#X obj 100 100 table 1003-streamstretch-buf-96 88192;
#X obj 100 100 table 1003-streamstretch-buf-97 88192;
#X obj 100 100 table 1003-streamstretch-buf-98 88192;
#X obj 100 100 table 1003-streamstretch-buf-99 88192;
#X restore 33 53 pd \$0-streamstretch-buffers;
#N canvas 766 24 450 300 gen-buffers 0;
#X obj 70 57 f;
#X obj 70 79 t f b;
#X obj 70 101 until;
#X obj 70 153 f;
#X obj 100 155 + 1;
#X msg 84 126 0;
#X obj 100 57 r \$0-streamstretch-num-buffers;
#X obj 70 175 pack f \$0;
#X msg 70 198 \; pd-\$2-streamstretch-buffers obj 100 100 table \$2-streamstretch-buf-\$1
88192 \;;
#X obj 154 114 f \$0;
#X msg 154 136 \; pd-\$1-streamstretch-buffers clear \;;
#X obj 169 84 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 70 35 r \$0-streamstretch-lb2;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 5 0;
#X connect 1 1 9 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 3 0 7 0;
#X connect 4 0 3 1;
#X connect 5 0 3 1;
#X connect 6 0 0 1;
#X connect 7 0 8 0;
#X connect 9 0 10 0;
#X connect 11 0 9 0;
#X connect 12 0 0 0;
#X restore 33 33 pd gen-buffers;
#X restore 441 102 pd buffer-tables;
#X text 227 43 buffer length is just shy of 10 seconds. it's a multiple
of 64 so that block size will fit perfectly at wrap around.;
#N canvas 635 26 523 251 buffer-writing 0;
#X obj 31 18 r \$0-streamstretch-num-buffers;
#X obj 31 50 pack f \$0;
#N canvas 0 22 450 300 \$0-streamstretch-buf-writers 0;
#X obj 100 100 clone ./lib/streamstretch-buf-writer-abs 100 1003;
#X restore 160 178 pd \$0-streamstretch-buf-writers;
#X msg 31 72 \; pd-\$2-streamstretch-buf-writers clear \; pd-\$2-streamstretch-buf-writers
obj 100 100 clone ./lib/streamstretch-buf-writer-abs \$1 \$2;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X restore 441 132 pd buffer-writing;
#X obj 73 118 r \$0-streamstretch-buffer-rec-switch;
#X obj 40 456 s \$0-streamstretch-current-write-buf;
#X obj 103 251 + 1;
#X obj 135 387 r \$0-streamstretch-num-buffers;
#X obj 102 387 %;
#X obj 152 242 ./lib/ms-to-blocks-abs;
#X obj 103 273 %;
#X obj 152 150 r \$0-streamstretch-record-rate;
#X obj 152 211 max;
#X obj 182 191 / 100;
#X obj 182 212 t b f;
#X obj 182 170 r \$0-streamstretch-buffer-len;
#X obj 152 263 + 1;
#X text 186 263 round up to one more block to ensure recording goes
all the way to end of buffer;
#X text 431 187 The minimum record rate allowable is relative to the
buffer length. We have to make sure that the record head of any given
buffer gets all the way to the end before it receives another record
command \, which starts the record head back at the beginning., f
76;
#X obj 232 191 r \$0-streamstretch-num-buffers;
#X obj 232 212 t b f;
#X connect 0 0 2 0;
#X connect 1 0 12 0;
#X connect 1 0 5 0;
#X connect 2 0 1 0;
#X connect 3 0 4 0;
#X connect 3 0 11 0;
#X connect 4 0 14 0;
#X connect 5 0 3 0;
#X connect 10 0 2 1;
#X connect 12 0 16 0;
#X connect 13 0 14 1;
#X connect 14 0 3 1;
#X connect 15 0 22 0;
#X connect 16 0 1 1;
#X connect 17 0 18 0;
#X connect 18 0 15 0;
#X connect 19 0 20 0;
#X connect 20 0 18 0;
#X connect 20 1 18 1;
#X connect 21 0 19 0;
#X connect 22 0 16 1;
#X connect 25 0 26 0;
#X connect 26 0 19 0;
#X connect 26 1 19 1;
#X restore 278 125 pd input-buffering;
#N canvas 434 23 919 763 trigger-playback 0;
#X obj 322 484 - 1;
#X text 390 560 read from 1 buffer behind the one currently being written
into, f 29;
#X obj 322 506 moses 0;
#X obj 322 590 f;
#X obj 101 94 random 100;
#X obj 101 138 t b;
#X obj 310 203 -;
#X obj 340 243 t b f;
#X obj 310 225 + 1;
#X obj 428 240 -;
#X obj 457 279 t b f;
#X obj 428 263 + 1;
#X obj 322 462 r \$0-streamstretch-current-write-buf;
#X obj 185 148 r \$0-streamstretch-manual-trig;
#N canvas 56 53 450 300 get-speed-range 0;
#X obj 130 117 unpack f f;
#X obj 73 75 t l l;
#X obj 42 116 unpack f f;
#X obj 42 138 max;
#X obj 130 139 min;
#X obj 42 160 outlet;
#X obj 131 163 outlet;
#X obj 80 49 r \$0-streamstretch-speed-range;
#X connect 0 0 4 0;
#X connect 0 1 4 1;
#X connect 1 0 2 0;
#X connect 1 1 0 0;
#X connect 2 0 3 0;
#X connect 2 1 3 1;
#X connect 3 0 5 0;
#X connect 4 0 6 0;
#X connect 7 0 1 0;
#X restore 310 177 pd get-speed-range;
#N canvas 56 53 450 300 get-transpo-range 0;
#X obj 130 117 unpack f f;
#X obj 73 75 t l l;
#X obj 42 116 unpack f f;
#X obj 42 138 max;
#X obj 130 139 min;
#X obj 42 160 outlet;
#X obj 131 163 outlet;
#X obj 80 49 r \$0-streamstretch-transpo-range;
#X connect 0 0 4 0;
#X connect 0 1 4 1;
#X connect 1 0 2 0;
#X connect 1 1 0 0;
#X connect 2 0 3 0;
#X connect 2 1 3 1;
#X connect 3 0 5 0;
#X connect 4 0 6 0;
#X connect 7 0 1 0;
#X restore 428 208 pd get-transpo-range;
#X obj 101 32 r \$0-streamstretch-auto-trig-switch;
#X obj 183 72 r \$0-streamstretch-auto-trig-rate;
#X obj 164 118 r \$0-streamstretch-auto-trig-prob;
#N canvas 324 117 662 647 chord-input 0;
#X obj 348 18 r \$0-streamstretch-chord;
#X obj 220 570 outlet;
#X obj 280 570 outlet;
#X obj 35 567 outlet;
#X obj 400 570 outlet;
#X obj 340 570 outlet;
#X msg 348 339 0;
#X msg 470 339 4;
#X obj 348 297 t b f b;
#X obj 348 131 list length;
#X obj 348 153 / 4;
#X obj 409 338 * 4;
#X obj 348 42 t b l;
#X obj 348 175 i;
#X obj 348 197 t f b;
#X obj 348 219 until;
#X obj 348 271 f;
#X obj 378 273 + 1;
#X msg 364 244 0;
#X obj 348 387 unpack f f f f;
#X obj 298 429 t b f;
#X obj 66 207 text define \$0-streamstretch-chord-text;
#X obj 348 365 text get \$0-streamstretch-chord-text;
#X obj 348 109 text tolist \$0-streamstretch-chord-text;
#X obj 398 79 text fromlist \$0-streamstretch-chord-text;
#X text 447 397 transposition \, speed \, amp \, dur;
#X connect 0 0 12 0;
#X connect 6 0 22 0;
#X connect 7 0 22 2;
#X connect 8 0 6 0;
#X connect 8 1 11 0;
#X connect 8 2 7 0;
#X connect 9 0 10 0;
#X connect 10 0 13 0;
#X connect 11 0 22 1;
#X connect 12 0 23 0;
#X connect 12 1 24 0;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 14 1 18 0;
#X connect 15 0 16 0;
#X connect 16 0 17 0;
#X connect 16 0 8 0;
#X connect 17 0 16 1;
#X connect 18 0 16 1;
#X connect 19 0 20 0;
#X connect 19 1 1 0;
#X connect 19 2 5 0;
#X connect 19 3 4 0;
#X connect 20 0 3 0;
#X connect 20 1 2 0;
#X connect 22 0 19 0;
#X connect 23 0 9 0;
#X restore 99 255 pd chord-input;
#X obj 516 281 -;
#X obj 546 321 t b f;
#X obj 516 303 + 1;
#N canvas 56 53 450 300 get-amp-range 0;
#X obj 132 117 unpack f f;
#X obj 73 75 t l l;
#X obj 42 116 unpack f f;
#X obj 42 138 max;
#X obj 132 139 min;
#X obj 42 218 outlet;
#X obj 132 219 outlet;
#X obj 73 49 r \$0-streamstretch-amp-range;
#X connect 0 0 4 0;
#X connect 0 1 4 1;
#X connect 1 0 2 0;
#X connect 1 1 0 0;
#X connect 2 0 3 0;
#X connect 2 1 3 1;
#X connect 3 0 5 0;
#X connect 4 0 6 0;
#X connect 7 0 1 0;
#X restore 516 255 pd get-amp-range;
#X obj 604 331 -;
#X obj 634 371 t b f;
#X obj 604 353 + 1;
#N canvas 56 53 450 300 get-dur-range 0;
#X obj 130 117 unpack f f;
#X obj 73 75 t l l;
#X obj 42 116 unpack f f;
#X obj 42 138 max;
#X obj 130 139 min;
#X obj 42 160 outlet;
#X obj 131 163 outlet;
#X obj 73 49 r \$0-streamstretch-duration-range;
#X connect 0 0 4 0;
#X connect 0 1 4 1;
#X connect 1 0 2 0;
#X connect 1 1 0 0;
#X connect 2 0 3 0;
#X connect 2 1 3 1;
#X connect 3 0 5 0;
#X connect 4 0 6 0;
#X connect 7 0 1 0;
#X restore 604 305 pd get-dur-range;
#X obj 101 191 t b b b b b b;
#X obj 357 533 r \$0-streamstretch-num-buffers;
#X obj 357 555 - 1;
#X obj 322 558 f;
#X obj 251 257 random;
#X obj 251 281 +;
#X obj 371 318 +;
#X obj 371 294 random;
#X obj 479 331 random;
#X obj 479 355 +;
#X obj 571 403 +;
#X obj 571 379 random;
#X text 176 715 playerID \, speed \, transpo \, amp \, buftableID \,
duration(ms);
#X obj 119 431 min 100;
#X obj 101 72 metro;
#X obj 101 116 moses;
#X obj 219 409 max 0;
#X obj 219 431 min 100;
#X obj 678 356 r \$0-streamstretch-buf-len-samps;
#X obj 678 379 t f b;
#X obj 678 401 /;
#X obj 718 401 samplerate~;
#X obj 718 423 / 1000;
#X obj 309 431 min;
#X obj 322 528 t b;
#X obj 119 409 max 1;
#X obj 678 429 * 100;
#X obj 309 409 max -1;
#N canvas 901 469 484 373 voice-assignment 0;
#X obj 65 23 inlet;
#X obj 65 272 outlet;
#X obj 145 272 outlet;
#X obj 65 68 f;
#X obj 102 50 + 1;
#X obj 102 75 % 1000;
#X obj 65 100 pack f 127;
#X obj 130 151 r \$0-streamstretch-note-off;
#X obj 212 72 f;
#X obj 249 54 + 1;
#X obj 249 79 %;
#X obj 279 79 r \$0-streamstretch-num-voices;
#X obj 65 222 - 1;
#X obj 65 200 poly 20 0;
#X obj 65 248 spigot;
#X connect 0 0 3 0;
#X connect 3 0 4 0;
#X connect 3 0 6 0;
#X connect 4 0 5 0;
#X connect 5 0 3 1;
#X connect 6 0 13 0;
#X connect 7 0 13 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 10 0 8 1;
#X connect 11 0 10 1;
#X connect 12 0 14 0;
#X connect 13 0 12 0;
#X connect 13 1 2 0;
#X connect 13 2 14 1;
#X connect 14 0 1 0;
#X restore 42 355 pd voice-assignment;
#X obj 101 500 pack f f f f f f \$0 f;
#X msg 101 662 \; \$7-streamstretch-reader-trig-\$1 \$3 \$5 \$7-streamstretch-buf-\$4
\$2 \$6 \$8 \;, f 76;
#X connect 0 0 2 0;
#X connect 2 0 52 0;
#X connect 2 1 3 0;
#X connect 3 0 57 3;
#X connect 4 0 43 0;
#X connect 5 0 28 0;
#X connect 6 0 8 0;
#X connect 7 0 6 0;
#X connect 7 1 6 1;
#X connect 7 1 33 1;
#X connect 8 0 32 1;
#X connect 9 0 11 0;
#X connect 10 0 9 0;
#X connect 10 1 9 1;
#X connect 10 1 34 1;
#X connect 11 0 35 1;
#X connect 12 0 0 0;
#X connect 13 0 28 0;
#X connect 14 0 6 0;
#X connect 14 1 7 0;
#X connect 15 0 9 0;
#X connect 15 1 10 0;
#X connect 16 0 42 0;
#X connect 17 0 42 1;
#X connect 18 0 43 1;
#X connect 19 0 56 0;
#X connect 19 1 53 0;
#X connect 19 2 57 2;
#X connect 19 3 44 0;
#X connect 19 4 55 0;
#X connect 20 0 22 0;
#X connect 21 0 20 0;
#X connect 21 1 20 1;
#X connect 21 1 37 1;
#X connect 22 0 36 1;
#X connect 23 0 20 0;
#X connect 23 1 21 0;
#X connect 24 0 26 0;
#X connect 25 0 24 0;
#X connect 25 1 24 1;
#X connect 25 1 38 1;
#X connect 26 0 39 1;
#X connect 27 0 24 0;
#X connect 27 1 25 0;
#X connect 28 0 56 0;
#X connect 28 2 32 0;
#X connect 28 3 36 0;
#X connect 28 4 35 0;
#X connect 28 5 39 0;
#X connect 29 0 30 0;
#X connect 30 0 31 0;
#X connect 31 0 3 0;
#X connect 32 0 33 0;
#X connect 33 0 53 0;
#X connect 34 0 57 2;
#X connect 35 0 34 0;
#X connect 36 0 37 0;
#X connect 37 0 44 0;
#X connect 38 0 55 0;
#X connect 39 0 38 0;
#X connect 41 0 57 1;
#X connect 42 0 4 0;
#X connect 43 0 5 0;
#X connect 44 0 45 0;
#X connect 45 0 57 4;
#X connect 46 0 47 0;
#X connect 47 0 48 0;
#X connect 47 1 49 0;
#X connect 48 0 54 0;
#X connect 49 0 50 0;
#X connect 50 0 48 1;
#X connect 51 0 57 5;
#X connect 52 0 31 0;
#X connect 53 0 41 0;
#X connect 54 0 51 1;
#X connect 55 0 51 0;
#X connect 56 0 57 0;
#X connect 56 1 57 7;
#X connect 57 0 58 0;
#X restore 278 145 pd trigger-playback;
#X obj 38 17 inlet~;
#X obj 38 39 s~ \$0-streamstretch-input-sig;
#N canvas 33 54 586 260 init 0;
#X obj 71 36 loadbang;
#X obj 311 71 f \$0;
#X obj 311 49 r \$0-streamstretch-lb1;
#X obj 71 58 t b b b b;
#X obj 101 100 s \$0-streamstretch-lb1;
#X obj 71 160 s \$0-streamstretch-lb4;
#X obj 81 140 s \$0-streamstretch-lb3;
#X obj 91 120 s \$0-streamstretch-lb2;
#X msg 311 102 \; \$1-streamstretch-num-buffers 100 \; \$1-streamstretch-num-voices
20 \;;
#X connect 0 0 3 0;
#X connect 1 0 8 0;
#X connect 2 0 1 0;
#X connect 3 0 5 0;
#X connect 3 1 6 0;
#X connect 3 2 7 0;
#X connect 3 3 4 0;
#X restore 278 105 pd init;
#X obj 439 26 inlet;
#N canvas 464 274 1078 577 command-parsing 0;
#X obj 46 48 inlet;
#X obj 46 151 list split 1;
#X obj 46 183 t b a;
#X obj 58 283 s;
#X obj 118 245 symbol;
#X obj 30 219 list;
#X obj 30 240 list trim;
#X floatatom 598 315 5 0 0 0 - - -;
#X floatatom 658 315 5 0 0 0 - - -;
#X obj 598 293 unpack f f;
#X floatatom 818 315 5 0 0 0 - - -;
#X floatatom 878 315 5 0 0 0 - - -;
#X obj 818 293 unpack f f;
#X obj 348 191 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 118 221 makefilename \$0-streamstretch-%s;
#X obj 348 161 r \$0-streamstretch-buffer-rec-switch;
#X obj 348 301 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 598 161 r \$0-streamstretch-window-size;
#X floatatom 598 183 5 0 0 0 - - -;
#X obj 598 271 r \$0-streamstretch-speed-range;
#X obj 818 271 r \$0-streamstretch-transpo-range;
#X floatatom 818 183 5 0 0 0 - - -;
#X obj 348 271 r \$0-streamstretch-auto-trig-switch;
#X floatatom 348 373 5 0 0 0 - - -;
#X obj 348 351 r \$0-streamstretch-auto-trig-rate;
#X obj 818 161 r \$0-streamstretch-auto-trig-prob;
#X floatatom 598 395 5 0 0 0 - - -;
#X floatatom 658 395 5 0 0 0 - - -;
#X obj 598 373 unpack f f;
#X obj 598 351 r \$0-streamstretch-amp-range;
#X floatatom 818 395 5 0 0 0 - - -;
#X floatatom 878 395 5 0 0 0 - - -;
#X obj 818 373 unpack f f;
#X obj 818 351 r \$0-streamstretch-duration-range;
#X obj 658 21 r \$0-streamstretch-buffer-len;
#X obj 658 43 ./lib/ms-to-blocks-abs;
#X obj 658 65 * 64;
#X floatatom 688 97 10 0 0 0 - - -;
#X floatatom 708 67 10 0 0 0 - - -;
#X obj 658 120 s \$0-streamstretch-buf-len-samps;
#X floatatom 348 423 5 0 0 0 - - -;
#X obj 348 401 r \$0-streamstretch-record-rate;
#X floatatom 818 485 5 0 0 0 - - -;
#X floatatom 878 485 5 0 0 0 - - -;
#X obj 818 463 unpack f f;
#X floatatom 578 485 5 0 0 0 - - -;
#X floatatom 638 485 5 0 0 0 - - -;
#X obj 578 463 unpack f f;
#X obj 578 441 r \$0-streamstretch-attack-time-range;
#X obj 818 441 r \$0-streamstretch-release-time-range;
#X obj 208 29 r \$0-streamstretch-lb3;
#X msg 208 59 buffer-rec-switch 0 \, auto-trig-switch 0 \, window-size
2048 \, auto-trig-rate 500 \, auto-trig-prob 70 \, speed-range 50 90
\, transpo-range 0 0 \, amp-range 90 100 \, duration-range 2000 4000
\, attack-time-range 50 100 \, release-time-range 50 100 \, record-rate
500 \, buffer-len 4000;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 5 1;
#X connect 2 0 5 0;
#X connect 2 1 14 0;
#X connect 4 0 3 1;
#X connect 5 0 6 0;
#X connect 6 0 3 0;
#X connect 9 0 7 0;
#X connect 9 1 8 0;
#X connect 12 0 10 0;
#X connect 12 1 11 0;
#X connect 14 0 4 0;
#X connect 15 0 13 0;
#X connect 17 0 18 0;
#X connect 19 0 9 0;
#X connect 20 0 12 0;
#X connect 22 0 16 0;
#X connect 24 0 23 0;
#X connect 25 0 21 0;
#X connect 28 0 26 0;
#X connect 28 1 27 0;
#X connect 29 0 28 0;
#X connect 32 0 30 0;
#X connect 32 1 31 0;
#X connect 33 0 32 0;
#X connect 34 0 35 0;
#X connect 34 0 38 0;
#X connect 35 0 36 0;
#X connect 36 0 37 0;
#X connect 36 0 39 0;
#X connect 41 0 40 0;
#X connect 44 0 42 0;
#X connect 44 1 43 0;
#X connect 47 0 45 0;
#X connect 47 1 46 0;
#X connect 48 0 47 0;
#X connect 49 0 44 0;
#X connect 50 0 51 0;
#X connect 51 0 1 0;
#X restore 439 48 pd command-parsing;
#X text 430 260 [streamStretch~] version 0.5.3;
#X text 430 280 William Brent \, July 2019;
#X connect 0 0 1 0;
#X connect 4 0 5 0;
#X connect 7 0 8 0;
